C51 COMPILER V9.54   SHOW                                                                  07/01/2016 12:06:20 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE SHOW
OBJECT MODULE PLACED IN .\Objects\show.obj
COMPILER INVOKED BY: E:\MDK\keil\keilmdk\C51\BIN\C51.EXE show.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\List
                    -ings\show.lst) TABS(2) OBJECT(.\Objects\show.obj)

line level    source

   1          #include "12864.h"
   2          #include "keyboard.h"
   3          #include "show.h"
   4          
   5          unsigned char xdata Flag_decade_unit=0;
   6          unsigned char xdata Point_hundreds=100;
   7          unsigned char xdata Point_decade=10;
   8          unsigned char xdata Point_unit=1;
   9          extern unsigned char key;
  10          extern unsigned char pre_key;
  11          extern int Point;
  12          extern float zkb;
  13          
  14          
  15          /*==========================================================   
  16           *函数名称：Draw_function()
  17           *功    能：显示初始界面
  18           *入口参数：
  19           *出口参数：
  20           *说    明：
  21           *==========================================================*/
  22          void Draw_function()
  23          {
  24   1          unsigned char i;
  25   1          for(i=0; i<4; i++)//通过点整显示汉字 -- i表示字表数组的位置
  26   1          {
  27   2            OLED_P16x16Ch(20+(i*20),0,i+8);//创新学院
  28   2          }
  29   1          for(i=0; i<7; i++)//通过点整显示汉字 -- i表示字表数组的位置
  30   1          {
  31   2            OLED_P16x16Ch(i*16,2,i+12);//三院15级物联网
  32   2          }
  33   1      }
  34          
  35          /*==========================================================   
  36           *函数名称：Obtain_Angle_accY(float Angle_F_Y)
  37           *功    能：显示实时角度
  38           *入口参数：Angle_F_Y
  39           *出口参数：
  40           *说    明：
  41           *==========================================================*/
  42          void Obtain_Angle_accY(float Angle_F_Y)
  43          {
  44   1        unsigned char i;
  45   1        unsigned int Angle_I_Y;
  46   1        OLED_P16x16Ch(2,4,0); //当  //列 页 字符
  47   1        OLED_P16x16Ch(17,4,1);//前
  48   1        OLED_P16x16Ch(32,4,2);//占
  49   1        OLED_P16x16Ch(47,4,3);//空
  50   1        OLED_P16x16Ch(62,4,4);//比
  51   1        OLED_P8x16Str(107,4,"%");
  52   1        OLED_P16x16Ch(77,4,32+(((int)(zkb*100/255)))/10);//x
  53   1        OLED_P16x16Ch(92,4,32+(((int)(zkb*100/255)))%10);//x
  54   1        for(i=0; i<8; i++)//显示角度
C51 COMPILER V9.54   SHOW                                                                  07/01/2016 12:06:20 PAGE 2   

  55   1          {
  56   2            OLED_P16x16Ch(i*16,6,i+19);//显示“角度xxx.x度”
  57   2          }
  58   1        Angle_I_Y=(int)(Angle_F_Y*10);//扩大十倍
  59   1          
  60   1        OLED_P16x16Ch(2*16,6,32+Angle_I_Y/1000);//显示百位
  61   1        if(Angle_I_Y>=1000)
  62   1          Angle_I_Y=Angle_I_Y%1000;
  63   1        OLED_P16x16Ch(3*16,6,32+Angle_I_Y/100);//显示十位
  64   1        if(Angle_I_Y>=100)
  65   1          Angle_I_Y=Angle_I_Y%100;
  66   1        OLED_P16x16Ch(4*16,6,32+Angle_I_Y/10);//显示个位
  67   1        OLED_P16x16Ch(6*16,6,32+Angle_I_Y%10);//显示小数
  68   1      }
  69          
  70          /*==========================================================   
  71           *函数名称：Set_Watch()
  72           *功    能：显示第二界面
  73           *入口参数：
  74           *出口参数：
  75           *说    明：显示“请设置角度”
  76           *==========================================================*/
  77          void Set_Watch()
  78          {
  79   1          OLED_P16x16Ch(2,0,27);  //请
  80   1          OLED_P16x16Ch(17,0,28); //设
  81   1          OLED_P16x16Ch(32,0,29); //置
  82   1          OLED_P16x16Ch(47,0,30); //角
  83   1          OLED_P16x16Ch(62,0,31); //度
  84   1      }
  85          
  86          /*==========================================================   
  87           *函数名称：Set_Angle_accY()
  88           *功    能：设置转到角度
  89           *入口参数：
  90           *出口参数：
  91           *说    明：0~9为有效按键
  92           *==========================================================*/
  93          void Set_Angle_accY()
  94          { 
  95   1          if(Flag_decade_unit==0)//百位
  96   1          {
  97   2            if((key==0)||(key==1))
  98   2            {
  99   3              OLED_P16x16Ch(2*16,2,32+key);
 100   3              Flag_decade_unit=1;
 101   3              Point_hundreds=100*key;
 102   3              pre_key=255;
 103   3            }
 104   2          }
 105   1          else if(Flag_decade_unit==1)//十位
 106   1          {
 107   2            if((key>=0)&&(key<=9))
 108   2            {
 109   3              OLED_P16x16Ch(3*16,2,32+key);
 110   3              Flag_decade_unit=2;
 111   3              Point_decade=10*key;
 112   3              pre_key=255;
 113   3            }
 114   2          }
 115   1          else if(Flag_decade_unit==2)//个位
 116   1          {
C51 COMPILER V9.54   SHOW                                                                  07/01/2016 12:06:20 PAGE 3   

 117   2            if((key>=0)&&(key<=9))
 118   2            {
 119   3              OLED_P16x16Ch(4*16,2,32+key);
 120   3              Point_unit=key;
 121   3              pre_key=255;
 122   3            }
 123   2          }
 124   1          
 125   1          if(key==12)
 126   1          {
 127   2            Point=Point_hundreds+Point_decade+Point_unit;
 128   2            OLED_P8x16Str(5*16,2,"SET-OK");
 129   2          }
 130   1          
 131   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    736    ----
   CONSTANT SIZE    =      9    ----
   XDATA SIZE       =      4    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       8
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
